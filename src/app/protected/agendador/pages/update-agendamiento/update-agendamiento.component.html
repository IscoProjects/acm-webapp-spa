<div class="m-1 sm:m-2 md:m-4">

    <section class="flex flex-col gap-5 mb-4">
        <div class="flex flex-col justify-between gap-3 md:flex-row md:items-center">
            <div class="flex flex-row items-center gap-3">
                <div
                    class="items-center rounded-full bg-gray-200 p-1.5 text-sm text-mirage-600 hidden dark:text-mirage-400 dark:bg-mirage-950 sm:flex">

                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-table-alias" width="28"
                        height="28" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M3 12v-7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-7"></path>
                        <path d="M3 10h18"></path>
                        <path d="M10 3v10"></path>
                        <path d="M2 17a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1v-4z"></path>
                    </svg>
                </div>
                <div>
                    <h1 class="text-sm font-semibold sm:text-lg">Gestión de citas</h1>
                    <p class="text-xs text-gray-400">Actualización de agendamientos</p>
                </div>
            </div>

            <form (ngSubmit)="searchAgendaInformation()" autocomplete="off">
                <div class="flex flex-row gap-0.5">
                    <div
                        class="p-2 text-center text-gray-500 border rounded-l-md border-mirage-400 bg-slate-100 dark:custom-input-dark">
                        <span class="text-[10px] sm:text-xs">Cédula</span>
                    </div>
                    <div class="flex">
                        <input [(ngModel)]="searchPatientString" (ngModelChange)="onSearchInputChange()"
                            class="tracking-wide custom-input-light-square placeholder:text-slate-400 focus:shadow-md dark:custom-input-dark-square dark:shadow-none"
                            placeholder="Buscar Paciente" type="text" name="search" maxlength="12">
                        <button type="submit"
                            class="p-2 ml-0.5 text-gray-200 bg-mirage-600 border-none rounded-r-md hover:bg-mirage-700 dark:bg-mirage-500 dark:hover:bg-mirage-600">
                            <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 20 20">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                            </svg>
                            <span class="sr-only">Search</span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <section>
        <div *ngIf="isAgendaFound" class="flex flex-col gap-3">
            <div class="flex-grow overflow-hidden border rounded border-mirage-400 dark:border-mirage-600">
                <div
                    class="flex items-center gap-2 p-2 font-medium tracking-wider uppercase border-b bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="text-blue-600 icon icon-tabler icon-tabler-id dark:text-blue-500" width="18" height="18"
                        viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z">
                        </path>
                        <path d="M9 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                        <path d="M15 8l2 0"></path>
                        <path d="M15 12l2 0"></path>
                        <path d="M7 16l10 0"></path>
                    </svg>
                    <h2 class="text-[10px] sm:text-xs">Datos Personales</h2>
                </div>

                <div>
                    <div class="grid grid-cols-1 gap-3 p-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Cédula</span>
                            <span id="pac-ci" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_cedula }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Apellidos</span>
                            <span id="pac-lastname" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_apellido }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Nombres</span>
                            <span id="pac-name" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_nombre }}</span>
                        </div>

                        <div>
                            <span class="block text-[10px] uppercase truncate font-medium dark:text-gray-400">Fecha
                                Nacimiento</span>
                            <span id="pac-age" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_fecha_nac }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] uppercase truncate font-medium dark:text-gray-400">Género</span>
                            <span id="pac-age" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_sexo }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Dirección</span>
                            <span id="pac-name" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_direccion }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Teléfono</span>
                            <span id="pac-name" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_telefono | nullPipe }}</span>
                        </div>

                        <div>
                            <span class="block text-[10px] uppercase truncate font-medium dark:text-gray-400">Grupo
                                Prioritario</span>
                            <span id="pac-gprio" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_gprioritario | emptyArray}}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex-grow overflow-hidden border rounded border-mirage-400 dark:border-mirage-600">
                <div
                    class="flex items-center gap-2 p-2 font-medium tracking-wider uppercase border-b bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="text-blue-600 icon icon-tabler icon-tabler-list-check dark:text-blue-500" width="18"
                        height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M3.5 5.5l1.5 1.5l2.5 -2.5"></path>
                        <path d="M3.5 11.5l1.5 1.5l2.5 -2.5"></path>
                        <path d="M3.5 17.5l1.5 1.5l2.5 -2.5"></path>
                        <path d="M11 6l9 0"></path>
                        <path d="M11 12l9 0"></path>
                        <path d="M11 18l9 0"></path>
                    </svg>
                    <h2 class="text-[10px] sm:text-xs">
                        Citas agendadas: {{patientNumerOfDates}} </h2>
                </div>

                <div *ngIf="patientNumerOfDates">
                    <div class="p-2">
                        <div class="flex">
                            <div class="w-full overflow-auto">
                                <table class="w-full mb-3 text-left">
                                    <thead
                                        class="uppercase bg-mirage-50 border border-mirage-400 text-[10px] font-medium dark:bg-mirage-950 dark:border-mirage-600">
                                        <tr>
                                            <th scope="col" class="p-4">
                                                Fecha
                                            </th>
                                            <th scope="col" class="p-4">
                                                Hora
                                            </th>
                                            <th scope="col" class="p-4">
                                                Polivalente
                                            </th>
                                            <th scope="col" class="p-4">
                                                Sección
                                            </th>
                                            <th scope="col" class="p-4">
                                                Profesional
                                            </th>
                                            <th scope="col" class="p-4">
                                                Detalle
                                            </th>
                                            <th scope="col" class="p-4">
                                                Asistencia
                                            </th>
                                            <th scope="col" class="p-4">
                                                Observaciones
                                            </th>
                                            <th scope="col" class="p-4">
                                                Modificar
                                            </th>
                                            <th scope="col" class="p-4">
                                                Cancelar
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="border border-mirage-400 dark:border-mirage-600">
                                        <tr *ngFor="let agendamiento of patientInformation.agendamiento | paginate: config"
                                            class="bg-gray-50 hover:bg-gray-100 dark:bg-zinc-900 dark:border-mirage-600 dark:hover:bg-mirage-900">
                                            <td class="p-4 whitespace-nowrap">
                                                {{ agendamiento.fecha_consulta | date}}
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                {{ agendamiento.hora_consulta}}
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                {{ agendamiento.usuario!.estacion_trabajo.descripcion}}
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                {{ agendamiento.usuario!.estacion_trabajo.seccion.descripcion}}
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                {{ agendamiento.usuario!.us_nombres}} {{
                                                agendamiento.usuario!.us_apellidos}}
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                <span [ngClass]="getStatusClass(agendamiento.detalle_agenda)">{{
                                                    agendamiento.detalle_agenda }}</span>
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                <span [ngClass]="getAssistanceClass(agendamiento.pac_asistencia)">{{
                                                    agendamiento.pac_asistencia | assistanceStatus }}</span>
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                {{ agendamiento.observaciones | nullPipe}}
                                            </td>
                                            <td class="p-4 whitespace-nowrap">
                                                <button (click)="updatePatientInformationForm(agendamiento);"
                                                    [value]="agendamiento.id_agendamiento"
                                                    class="p-1 text-xs font-medium text-green-800 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300 disabled:bg-none disabled:opacity-25"
                                                    [disabled]="!isAnEditableField(agendamiento)">
                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                        class="icon icon-tabler icon-tabler-edit" width="18" height="18"
                                                        viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                                        fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                        <path
                                                            d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1">
                                                        </path>
                                                        <path
                                                            d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z">
                                                        </path>
                                                        <path d="M16 5l3 3"></path>
                                                    </svg>
                                                </button>
                                            </td>
                                            <td>
                                                <button (click)="toggleCancelModal(agendamiento);"
                                                    [value]="agendamiento.id_agendamiento"
                                                    class="p-1 text-xs font-medium text-red-800 bg-red-100 rounded-full dark:bg-red-900 dark:text-red-300 disabled:bg-none disabled:opacity-25"
                                                    [disabled]="!isAnEditableField(agendamiento)">
                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                        class="icon icon-tabler icon-tabler-x" width="18" height="18"
                                                        viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                                        fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                        <path d="M18 6l-12 12"></path>
                                                        <path d="M6 6l12 12"></path>
                                                    </svg>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3 text-center text-[10px] sm:text-xs">
                        <pagination-controls [id]="config.id!" class="my-pagination" [maxSize]="maxSize"
                            [directionLinks]="directionLinks" [autoHide]="autoHide" [responsive]="responsive"
                            [previousLabel]="labels.previousLabel" [nextLabel]="labels.nextLabel"
                            [screenReaderPaginationLabel]="labels.screenReaderPaginationLabel"
                            [screenReaderPageLabel]="labels.screenReaderPageLabel"
                            [screenReaderCurrentLabel]="labels.screenReaderCurrentLabel"
                            (pageChange)="onPageChange($event)"
                            (pageBoundsCorrection)="onPageBoundsCorrection($event)"></pagination-controls>
                    </div>
                </div>

                <div *ngIf="!patientNumerOfDates">
                    <app-no-data></app-no-data>
                </div>
            </div>

        </div>

        <div *ngIf="!isAgendaFound"
            class="flex flex-col gap-3 p-3 border border-solid rounded border-mirage-400 bg-mirage-50 dark:bg-mirage-950 dark:border-mirage-600">


            <div class="flex flex-col items-center justify-between md:flex-row">
                <span class="text-sm font-medium">{{formatedDateNow | date}}</span>

                <span class="hidden text-sm font-medium uppercase md:flex">Agendamientos</span>

                <div
                    class="flex flex-row items-center gap-1.5 bg-gray-200 px-1.5 py-1 max-w-fit rounded-md dark:bg-mirage-950">

                    <div>
                        <select (change)="onChangeSelection($event)" id="filter-agenda"
                            class="pl-3 pr-2 truncate appearance-none cursor-pointer h-7 custom-input-light-nomargin focus:shadow-md dark:custom-input-dark-nomargin dark:shadow-none">
                            <option value="" hidden selected disabled> {{polFilterValue}}
                            </option>
                            <option *ngFor="let pol of polsInformation" [value]="pol.descripcion">
                                {{pol.descripcion}}</option>
                        </select>
                    </div>

                    <div class="items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-adjustments-alt"
                            width="22" height="22" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor"
                            fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                            <path d="M4 8h4v4h-4z"></path>
                            <path d="M6 4l0 4"></path>
                            <path d="M6 12l0 8"></path>
                            <path d="M10 14h4v4h-4z"></path>
                            <path d="M12 4l0 10"></path>
                            <path d="M12 18l0 2"></path>
                            <path d="M16 5h4v4h-4z"></path>
                            <path d="M18 4l0 1"></path>
                            <path d="M18 9l0 11"></path>
                        </svg>
                    </div>
                </div>
            </div>

            <div *ngIf="agendamientos.length >= 1" class="flex">
                <div class="w-full overflow-auto">
                    <table class="w-full mb-3 text-left">
                        <thead
                            class="uppercase bg-mirage-50 border border-mirage-400 text-[10px] font-medium dark:bg-mirage-950 dark:border-mirage-600">
                            <tr>
                                <th scope="col" class="p-4">
                                    Fecha
                                </th>
                                <th scope="col" class="p-4">
                                    Hora
                                </th>
                                <th scope="col" class="p-4">
                                    Paciente
                                </th>
                                <th scope="col" class="p-4">
                                    Tiempo
                                </th>
                                <th scope="col" class="p-4">
                                    Sección
                                </th>
                                <th scope="col" class="p-4">
                                    Profesional
                                </th>
                                <th scope="col" class="p-4">
                                    Detalle
                                </th>
                                <th scope="col" class="p-4">
                                    Asistencia
                                </th>
                                <th scope="col" class="p-4">
                                    Observaciones
                                </th>
                                <th scope="col" class="p-4">
                                    Modificar
                                </th>
                                <th scope="col" class="p-4">
                                    Cancelar
                                </th>
                            </tr>
                        </thead>
                        <tbody class="border border-mirage-400 dark:border-mirage-600">
                            <tr *ngFor="let agendamiento of agendamientos"
                                class="bg-gray-50 hover:bg-gray-100 dark:bg-zinc-900 dark:border-mirage-600 dark:hover:bg-mirage-900">
                                <td class="p-4 whitespace-nowrap">
                                    {{ agendamiento.fecha_consulta | date}}
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    {{ agendamiento.hora_consulta}}
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    <h2 class="font-medium text-gray-800 dark:text-white ">
                                        {{agendamiento.paciente?.pac_apellido}}
                                    </h2>
                                    <p class="text-sm font-normal text-gray-600 dark:text-gray-400">
                                        {{agendamiento.paciente?.pac_nombre}}</p>
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    {{ agendamiento.duracion_consulta}}
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    {{ agendamiento.usuario!.estacion_trabajo.seccion.descripcion}}
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    {{ agendamiento.usuario!.us_nombres}} {{
                                    agendamiento.usuario!.us_apellidos}}
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    <span [ngClass]="getStatusClass(agendamiento.detalle_agenda)">{{
                                        agendamiento.detalle_agenda }}</span>
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    <span [ngClass]="getAssistanceClass(agendamiento.pac_asistencia)">{{
                                        agendamiento.pac_asistencia | assistanceStatus }}</span>
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    {{ agendamiento.observaciones | nullPipe}}
                                </td>
                                <td class="p-4 whitespace-nowrap">
                                    <button type="button" (click)="updatePatientInformationForm(agendamiento);"
                                        [value]="agendamiento.id_agendamiento"
                                        class="p-1 text-xs font-medium text-green-800 bg-green-100 rounded-full dark:bg-green-900 dark:text-green-300 disabled:bg-none disabled:opacity-25"
                                        [disabled]="!isAnEditableField(agendamiento)">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            class="icon icon-tabler icon-tabler-edit" width="18" height="18"
                                            viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"
                                            stroke-linecap="round" stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1">
                                            </path>
                                            <path
                                                d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z">
                                            </path>
                                            <path d="M16 5l3 3"></path>
                                        </svg>
                                    </button>
                                </td>
                                <td>
                                    <button type="button" (click)="toggleCancelModal(agendamiento);"
                                        [value]="agendamiento.id_agendamiento"
                                        class="p-1 text-xs font-medium text-red-800 bg-red-100 rounded-full dark:bg-red-900 dark:text-red-300 disabled:bg-none disabled:opacity-25"
                                        [disabled]="!isAnEditableField(agendamiento)">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x"
                                            width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5"
                                            stroke="currentColor" fill="none" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                            <path d="M18 6l-12 12"></path>
                                            <path d="M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div *ngIf="agendamientos.length < 1">
                <app-no-data></app-no-data>
            </div>
        </div>

    </section>

    <!-- modal reagendamiendamiento -->
    <section *ngIf="showUpdateModal">
        <div
            class="fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none">
            <div class="relative my-6 mx-auto w-64 sm:w-96 md:w-[475px] lg:w-[600px]">
                <!--content-->
                <div
                    class="flex flex-col w-full overflow-hidden border border-solid rounded outline-none border-mirage-400 focus:outline-none dark:border-mirage-600">
                    <!-- formulario -->
                    <form autocomplete="off" [formGroup]="updateDateForm" (ngSubmit)="updatePatientDate()">
                        <!--header-->
                        <div
                            class="flex items-center justify-between px-3 py-2 border-b border-solid bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                            <div class="flex flex-row items-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg"
                                    class="text-blue-600 icon icon-tabler icon-tabler-replace dark:text-blue-500"
                                    width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path
                                        d="M3 3m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z">
                                    </path>
                                    <path
                                        d="M15 15m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z">
                                    </path>
                                    <path d="M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"></path>
                                    <path d="M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"></path>
                                </svg>
                                <h3 class="text-xs font-medium uppercase">
                                    Actualización de cita
                                </h3>
                            </div>
                            <button class="custom-close-button dark:custom-close-button-dark"
                                (click)="toggleUpdateModalClose()">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x"
                                    width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                    fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                    <path d="M18 6l-12 12"></path>
                                    <path d="M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                        <!--body-->
                        <div
                            class="relative flex-auto px-3 py-2 overflow-auto bg-gray-50 dark:bg-mirage-950 dark:border-mirage-600 md:overflow-hidden">
                            <div class="relative w-80 sm:w-auto">
                                <div class="flex text-xs md:text-sm">
                                    <span>{{ agendaUpdateSumary }}</span>
                                </div>
                                <div class="flex pb-2">
                                    <ng-select labelForId="usuario" formControlName="usuario"
                                        class="mt-1.5 text-sm w-full" placeholder="-- Seleccione --">
                                        <ng-option *ngFor="let profesional of listUsersBySection"
                                            [value]="profesional.id_usuario">{{profesional.us_apellidos
                                            + ' ' + profesional.us_nombres}}</ng-option>
                                    </ng-select>
                                </div>

                                <div class="flex h-[450px] flex-col gap-4 md:flex-row">
                                    <div class="flex flex-col gap-3 basis-1/2 md:overflow-y-auto">
                                        <span>Reservaciones</span>
                                        <div class="flex flex-col gap-2">
                                            <ng-container *ngFor="let event of eventos">
                                                <div
                                                    class="flex flex-col px-2 py-1 border-l-2 border-solid shadow-md border-mirage-600 rounded-r-md bg-mirage-50 dark:bg-zinc-900">
                                                    <div class="flex justify-between">
                                                        <div class="flex items-center gap-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                class="text-green-600 icon icon-tabler icon-tabler-clock-play"
                                                                width="13" height="13" viewBox="0 0 24 24"
                                                                stroke-width="1" stroke="currentColor" fill="none"
                                                                stroke-linecap="round" stroke-linejoin="round">
                                                                <path stroke="none" d="M0 0h24v24H0z" fill="none">
                                                                </path>
                                                                <path d="M12 7v5l2 2"></path>
                                                                <path d="M17 22l5 -3l-5 -3z">
                                                                </path>
                                                                <path d="M13.017 20.943a9 9 0 1 1 7.831 -7.292">
                                                                </path>
                                                            </svg>
                                                            <span class="text-sm">
                                                                {{event.start}} </span>
                                                        </div>
                                                        <div class="flex items-center gap-1">
                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                class="text-red-600 icon icon-tabler icon-tabler-clock-stop"
                                                                width="13" height="13" viewBox="0 0 24 24"
                                                                stroke-width="1" stroke="currentColor" fill="none"
                                                                stroke-linecap="round" stroke-linejoin="round">
                                                                <path stroke="none" d="M0 0h24v24H0z" fill="none">
                                                                </path>
                                                                <path d="M21 12a9 9 0 1 0 -9 9">
                                                                </path>
                                                                <path d="M12 7v5l1 1"></path>
                                                                <path d="M16 16h6v6h-6z"></path>
                                                            </svg>
                                                            <span class="text-sm">
                                                                {{event.end}}
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="flex flex-row items-center justify-between">

                                                        <span class="text-sm"><strong>Paciente:
                                                            </strong>{{event.paciente}}</span>

                                                        <small>{{event.duracion_consulta}}
                                                            min.</small>
                                                    </div>
                                                </div>
                                            </ng-container>
                                        </div>
                                    </div>
                                    <div class="flex flex-col gap-3 basis-1/2">
                                        <span>Calendario</span>
                                        <div>
                                            <div class="relative max-w-sm">
                                                <div
                                                    class="absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none">
                                                    <svg class="w-4 h-4 text-gray-500 dark:text-gray-400"
                                                        aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                                        fill="currentColor" viewBox="0 0 20 20">
                                                        <path
                                                            d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
                                                    </svg>
                                                </div>
                                                <input id="datepickerId" type="date" [min]="formatedDateNow"
                                                    [value]="formatedDateNow" (input)="updateDate($event)"
                                                    class="block w-full border border-solid border-mirage-400 text-sm rounded pl-10 p-2.5 focus:border-mirage-600 focus:outline-none dark:bg-mirage-950 dark:border-mirage-600 dark:placeholder-gray-400 dark:focus:border-mirage-400"
                                                    placeholder="Select date">
                                            </div>

                                        </div>

                                        <span>Nuevo agendamiento</span>

                                        <div>
                                            <div class="relative max-w-sm">
                                                <div
                                                    class="absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none">
                                                    <svg class="w-4 h-4 text-gray-500 dark:text-gray-400"
                                                        aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                                                        fill="currentColor" viewBox="0 0 20 20">
                                                        <path
                                                            d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
                                                    </svg>
                                                </div>
                                                <input type="time" [value]="formatedTimeNow"
                                                    (input)="updateTime($event)" min="8:00" max="19:00"
                                                    class="block w-full border border-solid border-mirage-400 text-sm rounded pl-10 p-2.5 focus:border-mirage-600 focus:outline-none dark:bg-mirage-950 dark:border-mirage-600 dark:placeholder-gray-400 dark:focus:border-mirage-400"
                                                    placeholder="Select time">
                                            </div>
                                        </div>

                                        <span>Tiempo de Consulta</span>

                                        <div class="flex flex-col items-center gap-3">
                                            <input type="range"
                                                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"
                                                name="default-range" id="default-range" [value]="defaultAppointmentTime"
                                                (input)="updateAppointmentTime($event)" min="15" max="60" step="5">

                                            <span class="text-gray-400"><strong
                                                    class="text-7xl">{{defaultAppointmentTime}}</strong>
                                                min.</span>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--footer-->
                        <div
                            class="flex items-center justify-end px-3 py-2 border-t border-solid bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                            <button type="submit"
                                class="custom-blue-button hover:shadow-md disabled:hover:shadow-none dark:custom-blue-button-dark dark:disabled:hover:shadow-none"
                                [disabled]="!updateDateForm.get('usuario')?.value">
                                Aceptar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div *ngIf="showUpdateModal"
            class="fixed inset-0 z-40 bg-slate-500 opacity-60 dark:bg-slate-900 dark:opacity-60">
        </div>
    </section>
</div>