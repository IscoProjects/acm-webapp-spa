<div class="m-1 sm:m-2 md:m-4">

    <section class="flex flex-col gap-5 mb-4">
        <div class="flex flex-col justify-between gap-3 md:flex-row md:items-center">
            <div class="flex flex-row items-center gap-3">
                <div
                    class="items-center rounded-full bg-gray-200 p-1.5 text-sm text-mirage-600 hidden dark:text-mirage-400 dark:bg-mirage-950 sm:flex">

                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-plus"
                        width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M4 5m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z">
                        </path>
                        <path d="M16 3l0 4"></path>
                        <path d="M8 3l0 4"></path>
                        <path d="M4 11l16 0"></path>
                        <path d="M10 16l4 0"></path>
                        <path d="M12 14l0 4"></path>
                    </svg>
                </div>
                <div>
                    <h1 class="text-sm font-semibold sm:text-lg">Agendamiento</h1>
                    <p class="text-xs text-gray-400">Registro de citas médicas.</p>
                </div>
            </div>

            <form (ngSubmit)="searchPatientInfo()" autocomplete="off">
                <div class="flex flex-row gap-0.5">
                    <div
                        class="p-2 text-center text-gray-500 border rounded-l-md border-mirage-400 bg-slate-100 dark:custom-input-dark">
                        <span class="text-[10px] sm:text-xs">Cédula</span>
                    </div>
                    <div class="flex">
                        <input [(ngModel)]="searchPatientString"
                            class="tracking-wide custom-input-light-square placeholder:text-slate-400 focus:shadow-md dark:custom-input-dark-square dark:shadow-none"
                            placeholder="Buscar Paciente" type="text" name="search" maxlength="12">
                        <button type="submit"
                            class="p-2 ml-0.5 text-gray-200 bg-mirage-600 border-none rounded-r-md hover:bg-mirage-700 dark:bg-mirage-500 dark:hover:bg-mirage-600">
                            <svg class="w-4 h-4" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 20 20">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                            </svg>
                            <span class="sr-only">Search</span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <section *ngIf="isPatientFound">
        <!-- Formulario de Agendamiento -->
        <div class="flex flex-col gap-3 pb-2">
            <div class="flex-grow overflow-hidden border rounded border-mirage-400 dark:border-mirage-600">
                <div
                    class="flex items-center gap-2 p-2 font-medium tracking-wider uppercase border-b bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                    <svg xmlns="http://www.w3.org/2000/svg"
                        class="text-blue-600 icon icon-tabler icon-tabler-id dark:text-blue-500" width="18" height="18"
                        viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                        <path d="M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v10a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z">
                        </path>
                        <path d="M9 10m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                        <path d="M15 8l2 0"></path>
                        <path d="M15 12l2 0"></path>
                        <path d="M7 16l10 0"></path>
                    </svg>
                    <h2 class="text-[10px] sm:text-xs">
                        Verificar
                        Información</h2>
                </div>

                <div>
                    <div class="grid grid-cols-1 gap-3 p-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Cédula</span>
                            <span id="pac-ci" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_cedula }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Apellidos</span>
                            <span id="pac-lastname" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_apellido }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">
                                Nombres
                            </span>
                            <span id="pac-name" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_nombre }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Fecha
                                Nacimiento</span>
                            <span id="pac-age" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_fecha_nac }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] uppercase truncate font-medium dark:text-gray-400">Género</span>
                            <span id="pac-age" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_sexo }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Dirección</span>
                            <span id="pac-name" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_direccion }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Teléfono</span>
                            <span id="pac-tel" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_telefono | nullPipe }}</span>
                        </div>

                        <div>
                            <span
                                class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Grupo
                                Prioritario</span>
                            <span id="pac-gprio" class="h-10 text-base font-normal tracking-normal">{{
                                patientInformation.pac_gprioritario | emptyArray }}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex-grow">
                <form [formGroup]="registerNewPatientDate" autocomplete="off" (ngSubmit)="createPatientDate()">
                    <div class="flex-grow overflow-hidden border rounded border-mirage-400 dark:border-mirage-600">
                        <div
                            class="flex items-center gap-2 p-2 font-medium tracking-wider uppercase border-b bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                class="text-blue-600 icon icon-tabler icon-tabler-book-2 dark:text-blue-500" width="18"
                                height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z"></path>
                                <path d="M19 16h-12a2 2 0 0 0 -2 2"></path>
                                <path d="M9 8h6"></path>
                            </svg>
                            <h2 class="text-[10px] sm:text-xs">
                                Reservación</h2>
                        </div>
                        <div>
                            <div class="grid grid-cols-1 gap-3 p-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">

                                <div class="">
                                    <label for="tipo_agenda"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Tipo
                                        de
                                        Agendamiento <strong class="font-semibold text-blue-500">*</strong></label>
                                    <ng-select [items]="channelSchedulingList" labelForId="tipo_agenda"
                                        class="mt-1.5 text-sm" placeholder="-- Seleccione --"
                                        formControlName="canal_agenda">
                                    </ng-select>
                                </div>

                                <div class="">
                                    <label for="pac_afiliacion"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Afiliación
                                        Paciente</label>
                                    <ng-select [items]="patientAffiliationList" labelForId="pac_afiliacion"
                                        class="mt-1.5 text-sm" placeholder="-- Seleccione --"
                                        formControlName="pac_afiliacion">
                                    </ng-select>
                                </div>

                                <div [formGroup]="searchAreasInformation">
                                    <label for="area_agenda"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Área
                                        de
                                        servicio <strong class="font-semibold text-blue-500">*</strong></label>
                                    <ng-select labelForId="area_agenda" formControlName="area_agenda"
                                        class="mt-1.5 text-sm" placeholder="-- Seleccione --">
                                        <ng-option *ngFor="let area of areasInformation"
                                            [value]="area.descripcion">{{area.descripcion}}</ng-option>
                                    </ng-select>
                                </div>

                                <div [formGroup]="searchAreasInformation"
                                    *ngIf="searchAreasInformation.get('area_agenda')?.value">
                                    <label for="seccion_agenda"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Sección
                                        <strong class="font-semibold text-blue-500">*</strong></label>
                                    <ng-select labelForId="seccion_agenda" formControlName="seccion_agenda"
                                        class="mt-1.5 text-sm" placeholder="-- Seleccione --">
                                        <ng-option *ngFor="let section of sectionsInformation"
                                            [value]="section.descripcion">{{section.descripcion}}</ng-option>
                                    </ng-select>
                                </div>

                                <div [formGroup]="searchAreasInformation"
                                    *ngIf="searchAreasInformation.get('seccion_agenda')?.value">
                                    <label for="pol_agenda"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Profesional
                                        <strong class="font-semibold text-blue-500">*</strong></label>
                                    <input (click)="togglePolModal()" id="pol_agenda"
                                        class="h-10 pl-3 appearance-none cursor-pointer custom-input-light focus:shadow-md dark:custom-input-dark dark:shadow-none"
                                        placeholder="--Seleccione--" readonly value="{{ professionalPreferenceName }}">
                                </div>

                                <div *ngIf="professionalPreferenceName">
                                    <label for="calendar-picker"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Fecha
                                        <strong class="font-semibold text-blue-500">*</strong></label>
                                    <input (click)="toggleOpenDateModal()" id="calendar-picker"
                                        class="h-10 pl-3 appearance-none cursor-pointer custom-input-light focus:shadow-md dark:custom-input-dark dark:shadow-none"
                                        placeholder="--Seleccione--" readonly
                                        value="{{registerNewPatientDate.get('fecha_consulta')?.value}}">
                                </div>

                                <div *ngIf="registerNewPatientDate.get('fecha_consulta')?.value">
                                    <label for="time-picker"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Hora
                                        <strong class="font-semibold text-blue-500">*</strong></label>
                                    <input id="time-picker"
                                        class="h-10 pl-3 appearance-none cursor-pointer custom-input-light focus:shadow-md dark:custom-input-dark dark:shadow-none"
                                        placeholder="--Seleccione--" readonly
                                        value="{{registerNewPatientDate.get('hora_consulta')?.value}}">
                                </div>

                                <div *ngIf="registerNewPatientDate.get('fecha_consulta')?.value">
                                    <label for="duracion-consulta"
                                        class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Tiempo
                                        Aprox.
                                        <strong class="font-semibold text-blue-500">*</strong></label>
                                    <input id="duracion-consulta"
                                        class="h-10 pl-3 appearance-none cursor-pointer custom-input-light focus:shadow-md dark:custom-input-dark dark:shadow-none"
                                        placeholder="--Seleccione--" readonly
                                        value="{{registerNewPatientDate.get('duracion_consulta')?.value}} min">
                                </div>

                                <!-- Modal polivalente -->
                                <section *ngIf="showPolModal">
                                    <div
                                        class="fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none">
                                        <div
                                            class="relative my-3 mx-auto max-w-[16rem] sm:my-6 sm:max-w-md sm:min-w-[20rem] md:max-w-xl">
                                            <!--content-->
                                            <div
                                                class="relative flex w-full min-w-[14rem] flex-col rounded overflow-hidden border border-mirage-400 border-solid outline-none focus:outline-none dark:border-mirage-600">
                                                <!--header-->
                                                <div
                                                    class="flex items-center justify-between px-3 py-2 border-b border-solid bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                                                    <div class="flex flex-row items-center gap-2">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            class="icon icon-tabler icon-tabler-hand-click" width="18"
                                                            height="18" viewBox="0 0 24 24" stroke-width="1.5"
                                                            stroke="currentColor" fill="none" stroke-linecap="round"
                                                            stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                            <path d="M8 13v-8.5a1.5 1.5 0 0 1 3 0v7.5"></path>
                                                            <path d="M11 11.5v-2a1.5 1.5 0 0 1 3 0v2.5"></path>
                                                            <path d="M14 10.5a1.5 1.5 0 0 1 3 0v1.5"></path>
                                                            <path
                                                                d="M17 11.5a1.5 1.5 0 0 1 3 0v4.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7l-.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47">
                                                            </path>
                                                            <path d="M5 3l-1 -1"></path>
                                                            <path d="M4 7h-1"></path>
                                                            <path d="M14 3l1 -1"></path>
                                                            <path d="M15 6h1"></path>
                                                        </svg>
                                                        <h3 class="text-xs font-medium uppercase">Seleccione
                                                            Profesional
                                                        </h3>
                                                    </div>
                                                    <button class="custom-close-button dark:custom-close-button-dark"
                                                        (click)="togglePolModalClose()">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            class="icon icon-tabler icon-tabler-x" width="18"
                                                            height="18" viewBox="0 0 24 24" stroke-width="1.5"
                                                            stroke="currentColor" fill="none" stroke-linecap="round"
                                                            stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none">
                                                            </path>
                                                            <path d="M18 6l-12 12"></path>
                                                            <path d="M6 6l12 12"></path>
                                                        </svg>
                                                    </button>
                                                </div>
                                                <!--body-->
                                                <div
                                                    class="relative flex-auto px-3 py-2 max-h-[440px] bg-gray-50  overflow-y-auto dark:bg-mirage-950 dark:border-mirage-600">
                                                    <div class="relative min-h-[6rem] overflow-x-auto w-80 sm:w-auto">
                                                        <span
                                                            class="text-[10px] uppercase font-medium dark:text-gray-400">Asignaciones</span>
                                                        <div>
                                                            <table class="w-full text-left">
                                                                <thead
                                                                    class="text-xs uppercase border bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                                                                    <tr>
                                                                        <th scope="col"
                                                                            class="px-1.5 py-2 text-[10px] font-medium uppercase">
                                                                            Médico</th>
                                                                        <th scope="col"
                                                                            class="px-1.5 py-2 text-[10px] font-medium uppercase">
                                                                            Polivalente</th>
                                                                    </tr>
                                                                </thead>

                                                                <tbody
                                                                    class="border border-mirage-400 dark:border-mirage-600">
                                                                    <tr
                                                                        *ngFor="let profesional of profesionalInformation ">
                                                                        <td class="px-1.5 py-2 flex flex-col gap-1">
                                                                            <div
                                                                                [ngClass]="getStringStyle(profesional.us_isActive)">
                                                                                <span>{{profesional.us_apellidos + ' '
                                                                                    +
                                                                                    profesional.us_nombres |
                                                                                    nullPipe}}</span>
                                                                            </div>
                                                                        </td>
                                                                        <td class="px-1.5 py-2">
                                                                            <div class="flex flex-row gap-3">
                                                                                <span>
                                                                                    {{
                                                                                    profesional.estacion_trabajo.descripcion
                                                                                    }}
                                                                                </span>
                                                                                <span
                                                                                    [ngClass]="getAppointmentLengthStyle(profesional.numTurnos!)">{{profesional.numTurnos
                                                                                    + ' turnos'}}</span>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>

                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="my-2 sm:mx-1">
                                                        <label for="usuario"
                                                            class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Preferencia
                                                            <strong
                                                                class="font-semibold text-blue-500">*</strong></label>
                                                        <ng-select labelForId="usuario" formControlName="usuario"
                                                            class="mt-1.5 text-sm" placeholder="-- Seleccione --">
                                                            <ng-option
                                                                *ngFor="let profesional of profesionalInformation"
                                                                [value]="profesional.id_usuario">{{profesional.us_apellidos
                                                                + ' ' + profesional.us_nombres}}</ng-option>
                                                        </ng-select>
                                                    </div>
                                                </div>
                                                <!--footer-->
                                                <div
                                                    class="flex items-center justify-end px-3 py-2 border-t border-solid bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                                                    <button (click)="togglePolModalAccept()"
                                                        class="custom-blue-button hover:shadow-md disabled:hover:shadow-none dark:custom-blue-button-dark dark:disabled:hover:shadow-none"
                                                        [disabled]="!registerNewPatientDate.get('usuario')?.value">Aceptar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="showPolModal"
                                        class="fixed inset-0 z-40 bg-slate-500 opacity-60 dark:bg-slate-900 dark:opacity-60">
                                    </div>
                                </section>

                                <!-- Modal Fecha -->
                                <section *ngIf="showDateModal">
                                    <div
                                        class="fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none">
                                        <div class="relative my-6 mx-auto w-64 sm:w-96 md:w-[475px] lg:w-[650px]">
                                            <!--content-->
                                            <div
                                                class="flex flex-col w-full overflow-hidden border border-solid rounded outline-none border-mirage-400 bg-mirage-50 focus:outline-none dark:border-mirage-600">
                                                <!--header-->
                                                <div
                                                    class="flex items-center justify-between px-3 py-2 border-b border-solid bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                                                    <div class="flex flex-row items-center gap-2">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            class="text-blue-600 icon icon-tabler icon-tabler-calendar-stats dark:text-blue-500"
                                                            width="18" height="18" viewBox="0 0 24 24"
                                                            stroke-width="1.5" stroke="currentColor" fill="none"
                                                            stroke-linecap="round" stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none">
                                                            </path>
                                                            <path
                                                                d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4">
                                                            </path>
                                                            <path d="M18 14v4h4"></path>
                                                            <path d="M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0">
                                                            </path>
                                                            <path d="M15 3v4"></path>
                                                            <path d="M7 3v4"></path>
                                                            <path d="M3 11h16"></path>
                                                        </svg>
                                                        <h3 class="text-xs font-medium uppercase">
                                                            Agendar
                                                        </h3>
                                                    </div>
                                                    <button class="custom-close-button dark:custom-close-button-dark"
                                                        (click)="toggleCloseDateModal()">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            class="icon icon-tabler icon-tabler-x" width="18"
                                                            height="18" viewBox="0 0 24 24" stroke-width="1.5"
                                                            stroke="currentColor" fill="none" stroke-linecap="round"
                                                            stroke-linejoin="round">
                                                            <path stroke="none" d="M0 0h24v24H0z" fill="none">
                                                            </path>
                                                            <path d="M18 6l-12 12"></path>
                                                            <path d="M6 6l12 12"></path>
                                                        </svg>
                                                    </button>
                                                </div>
                                                <!--body-->
                                                <div
                                                    class="relative flex-auto px-3 py-2 overflow-auto bg-gray-50 dark:bg-mirage-950 dark:border-mirage-600 md:overflow-hidden">
                                                    <div class="relative w-80 sm:w-auto">
                                                        <div class="flex h-[450px] flex-col gap-4 md:flex-row">
                                                            <div
                                                                class="flex flex-col gap-3 basis-1/2 md:overflow-y-auto">
                                                                <span>Reservaciones</span>
                                                                <div class="flex flex-col gap-2">
                                                                    <ng-container *ngFor="let event of eventos">
                                                                        <div
                                                                            class="flex flex-col px-2 py-1 border-l-2 border-solid shadow-md border-mirage-600 rounded-r-md bg-mirage-50 dark:bg-zinc-900">
                                                                            <div class="flex justify-between">
                                                                                <div class="flex items-center gap-1">
                                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                                        class="text-green-600 icon icon-tabler icon-tabler-clock-play"
                                                                                        width="13" height="13"
                                                                                        viewBox="0 0 24 24"
                                                                                        stroke-width="1"
                                                                                        stroke="currentColor"
                                                                                        fill="none"
                                                                                        stroke-linecap="round"
                                                                                        stroke-linejoin="round">
                                                                                        <path stroke="none"
                                                                                            d="M0 0h24v24H0z"
                                                                                            fill="none">
                                                                                        </path>
                                                                                        <path d="M12 7v5l2 2"></path>
                                                                                        <path d="M17 22l5 -3l-5 -3z">
                                                                                        </path>
                                                                                        <path
                                                                                            d="M13.017 20.943a9 9 0 1 1 7.831 -7.292">
                                                                                        </path>
                                                                                    </svg>
                                                                                    <span class="text-sm">
                                                                                        {{event.start}} </span>
                                                                                </div>
                                                                                <div class="flex items-center gap-1">
                                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                                        class="text-red-600 icon icon-tabler icon-tabler-clock-stop"
                                                                                        width="13" height="13"
                                                                                        viewBox="0 0 24 24"
                                                                                        stroke-width="1"
                                                                                        stroke="currentColor"
                                                                                        fill="none"
                                                                                        stroke-linecap="round"
                                                                                        stroke-linejoin="round">
                                                                                        <path stroke="none"
                                                                                            d="M0 0h24v24H0z"
                                                                                            fill="none"></path>
                                                                                        <path d="M21 12a9 9 0 1 0 -9 9">
                                                                                        </path>
                                                                                        <path d="M12 7v5l1 1"></path>
                                                                                        <path d="M16 16h6v6h-6z"></path>
                                                                                    </svg>
                                                                                    <span class="text-sm">
                                                                                        {{event.end}}
                                                                                    </span>
                                                                                </div>
                                                                            </div>
                                                                            <div
                                                                                class="flex flex-row items-center justify-between">

                                                                                <span class="text-sm"><strong>Paciente:
                                                                                    </strong>{{event.paciente}}</span>

                                                                                <small>{{event.duracion_consulta}}
                                                                                    min.</small>
                                                                            </div>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                            <div class="flex flex-col gap-3 basis-1/2">

                                                                <span>Calendario</span>

                                                                <div>
                                                                    <div class="relative max-w-sm">
                                                                        <div
                                                                            class="absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none">
                                                                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400"
                                                                                aria-hidden="true"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20">
                                                                                <path
                                                                                    d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
                                                                            </svg>
                                                                        </div>
                                                                        <input id="datepickerId" type="date" [min]=""
                                                                            [value]="formatedDateNow"
                                                                            (input)="updateDate($event)"
                                                                            class="block w-full border border-solid border-mirage-400 text-sm rounded pl-10 p-2.5 focus:border-mirage-600 focus:outline-none dark:bg-mirage-950 dark:border-mirage-600 dark:placeholder-gray-400 dark:focus:border-mirage-400"
                                                                            placeholder="Select date">
                                                                    </div>
                                                                </div>

                                                                <span>Hora de inicio</span>

                                                                <div>
                                                                    <div class="relative max-w-sm">
                                                                        <div
                                                                            class="absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none">
                                                                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400"
                                                                                aria-hidden="true"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20">
                                                                                <path
                                                                                    d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
                                                                            </svg>
                                                                        </div>
                                                                        <input type="time" [value]="formatedTimeNow"
                                                                            (input)="updateTime($event)" min="8:00"
                                                                            max="19:00"
                                                                            class="block w-full border border-solid border-mirage-400 text-sm rounded pl-10 p-2.5 focus:border-mirage-600 focus:outline-none dark:bg-mirage-950 dark:border-mirage-600 dark:placeholder-gray-400 dark:focus:border-mirage-400"
                                                                            placeholder="Select time">
                                                                    </div>
                                                                </div>

                                                                <span>Tiempo de Consulta</span>

                                                                <div class="flex flex-col items-center gap-3">
                                                                    <input type="range"
                                                                        class="w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"
                                                                        name="default-range" id="default-range"
                                                                        [value]="defaultAppointmentTime"
                                                                        (input)="updateAppointmentTime($event)" min="15"
                                                                        max="60" step="5">

                                                                    <span class="text-gray-400"><strong
                                                                            class="text-7xl">{{defaultAppointmentTime}}</strong>
                                                                        min.</span>
                                                                </div>

                                                                <ng-container *ngIf="formatedTimeEnd">

                                                                    <span>Hora de finalización</span>

                                                                    <div>
                                                                        <div class="relative max-w-sm">
                                                                            <div
                                                                                class="absolute inset-y-0 left-0 flex items-center pl-3.5 pointer-events-none">
                                                                                <svg class="w-4 h-4 text-gray-500 dark:text-gray-400"
                                                                                    aria-hidden="true"
                                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                                    fill="currentColor"
                                                                                    viewBox="0 0 20 20">
                                                                                    <path
                                                                                        d="M20 4a2 2 0 0 0-2-2h-2V1a1 1 0 0 0-2 0v1h-3V1a1 1 0 0 0-2 0v1H6V1a1 1 0 0 0-2 0v1H2a2 2 0 0 0-2 2v2h20V4ZM0 18a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8H0v10Zm5-8h10a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" />
                                                                                </svg>
                                                                            </div>
                                                                            <input type="time" [value]="formatedTimeEnd"
                                                                                class="block w-full border border-solid border-mirage-400 text-sm rounded pl-10 p-2.5 focus:border-mirage-600 focus:outline-none dark:bg-mirage-950 dark:border-mirage-600 dark:placeholder-gray-400 dark:focus:border-mirage-400"
                                                                                disabled>
                                                                        </div>
                                                                    </div>
                                                                </ng-container>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--footer-->
                                                <div
                                                    class="flex items-center justify-end px-3 py-2 border-t border-solid bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                                                    <button type="button" (click)="toggleDateModalSubmit()"
                                                        class="custom-blue-button hover:shadow-md disabled:hover:shadow-none dark:custom-blue-button-dark dark:disabled:hover:shadow-none">
                                                        Aceptar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="showDateModal"
                                        class="fixed inset-0 z-40 bg-slate-500 opacity-60 dark:bg-slate-900 dark:opacity-60">
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>

                    <div class="flex-grow mt-3 overflow-hidden border rounded border-mirage-400 dark:border-mirage-600">
                        <div
                            class="flex items-center gap-2 p-2 font-medium tracking-wider uppercase border-b bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                class="text-blue-600 icon icon-tabler icon-tabler-message-2 dark:text-blue-500"
                                width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M8 9h8"></path>
                                <path d="M8 13h6"></path>
                                <path
                                    d="M9 18h-3a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-3l-3 3l-3 -3z">
                                </path>
                            </svg>
                            <h2 class="text-[10px] sm:text-xs">
                                Detalles</h2>
                        </div>
                        <div class="p-3">
                            <div>
                                <label for="comment"
                                    class="block text-[10px] tracking-wider text-gray-500 uppercase font-medium dark:text-gray-400">Observación</label>
                                <textarea id="comment" formControlName="observaciones"
                                    oninput="this.style.height = (this.scrollHeight + 2) + 'px';"
                                    class="custom-input-light max-w-lg resize-none p-2.5 focus:shadow-md dark:custom-input-dark dark:shadow-none"
                                    placeholder="Max. 60 caracteres" maxlength="60"></textarea>
                            </div>
                            <div class="flex items-center pt-1 my-2">
                                <input type="checkbox" name="no-request" id="no-request"
                                    class="w-4 h-4 checked:bg-blue-500" [checked]="isDemandaNoAgendadaChecked"
                                    (change)="onEvaluateDemand($event)">
                                <label for="no-request" class="ml-3 text-sm font-normal">Marcar como Demanda no
                                    Agendada</label>
                            </div>
                            <div class="flex items-center my-2">
                                <input type="checkbox" name="interconsulta" id="interconsulta"
                                    class="w-4 h-4 checked:bg-blue-500" [checked]="isInterconsultaChecked"
                                    (change)="onEvaluateInterconsulta($event)">
                                <label for="interconsulta" class="ml-3 text-sm font-normal">Marcar como
                                    Interconsulta</label>
                            </div>
                        </div>
                    </div>

                    <div class="flex-grow mt-3 overflow-hidden border rounded border-mirage-400 dark:border-mirage-600">
                        <div
                            class="flex items-center gap-2 p-2 font-medium tracking-wider uppercase border-b bg-mirage-50 border-mirage-400 dark:bg-mirage-950 dark:border-mirage-600">
                            <svg xmlns="http://www.w3.org/2000/svg"
                                class="text-blue-600 icon icon-tabler icon-tabler-browser-check dark:text-blue-500"
                                width="18" height="18" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
                                fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path
                                    d="M4 4m0 1a1 1 0 0 1 1 -1h14a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-14a1 1 0 0 1 -1 -1z">
                                </path>
                                <path d="M4 8h16"></path>
                                <path d="M8 4v4"></path>
                                <path d="M9.5 14.5l1.5 1.5l3 -3"></path>
                            </svg>
                            <h2 class="text-[10px] sm:text-xs">Efectuar registro
                            </h2>
                        </div>
                        <div class="flex items-center justify-center p-3">
                            <button type="submit"
                                class="custom-blue-button hover:shadow-md disabled:hover:shadow-none dark:custom-blue-button-dark dark:disabled:hover:shadow-none"
                                [disabled]="registerNewPatientDate.invalid">
                                <span class="px-3">Agendar</span>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
</div>